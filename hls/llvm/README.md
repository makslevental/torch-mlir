blatantly ripped off from https://github.com/kumasento/phism/tree/main/lib/llvm/Transforms