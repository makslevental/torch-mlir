import numpy as np

from hls.scripts.refactor.memref import MemRef, GlobalMemRef
from hls.scripts.refactor.ops import Copy
from hls.scripts.refactor.runner import ParFor, Forward

# fmt: off
__constant_11x11xf32 = np.array(
    [2.968844e-01, -2.915689e-01, 2.139401e-02, 2.943872e-01, -1.724240e-02, 3.028885e-02, -7.360618e-02, 2.734542e-03,
     -1.801301e-01, -2.712744e-01, 2.745695e-01, 1.186786e-01, -1.181492e-01, 2.719658e-01, -7.493632e-02,
     -2.083258e-01, 7.829964e-03, 1.151990e-01, -1.109135e-01, 5.257213e-02, 2.250665e-01, -2.931135e-01, 2.026538e-01,
     2.007893e-01, -5.067152e-02, -2.967077e-01, -2.477968e-01, -2.437576e-01, -2.918196e-01, 1.000043e-01,
     2.663624e-01, -1.713669e-01, -1.920770e-01, 1.209790e-01, 2.868841e-01, 1.549092e-01, -1.636239e-01, -2.723781e-01,
     -1.545290e-01, 1.806230e-01, 1.080029e-01, -3.899652e-02, -3.549948e-02, 1.918325e-01, 1.900582e-01, 1.066417e-01,
     -2.503020e-01, -3.520319e-02, -6.633016e-02, -2.156311e-02, -1.989253e-01, -1.430622e-02, -2.343440e-01,
     2.044955e-01, -1.522638e-01, -5.558133e-03, 2.055528e-01, -1.978297e-01, 9.398124e-02, 6.191966e-02, -2.644534e-01,
     2.837387e-01, -8.520205e-02, -1.180973e-01, 2.424304e-01, 2.393672e-01, 1.095162e-01, 2.063531e-01, -2.933043e-01,
     1.189207e-01, -4.302189e-02, -7.469848e-02, -1.515232e-01, -2.891511e-01, 8.217663e-03, -2.600819e-01,
     -1.335390e-01, -5.629183e-02, -2.622545e-01, -2.871320e-01, -1.519874e-02, 1.183095e-01, -5.354282e-02,
     -2.139390e-01, -1.618557e-01, -1.126370e-01, -6.050536e-02, 1.571489e-01, -3.958216e-02, 5.452317e-02,
     1.976553e-02, 2.173289e-01, 2.784188e-01, 2.639659e-01, -1.248714e-01, -2.598687e-01, -1.170045e-01, -4.510850e-03,
     7.656825e-02, -4.527721e-02, 2.086557e-01, -1.224028e-01, 2.312857e-02, 2.083930e-01, -6.638308e-02, -9.063512e-02,
     -2.270476e-01, -3.013393e-01, -3.752917e-03, -2.554800e-01, -1.747192e-01, -2.935536e-01, -2.476110e-01,
     -1.892965e-01, -7.419449e-02, -9.200084e-02, -1.410990e-01, -3.152719e-02, 3.007957e-01, -2.791621e-01,
     -1.629761e-01, ]).reshape(11, 11, )
__constant_11xf32 = np.array(
    [-9.889990e-03, -1.728619e-01, -2.060619e-01, -5.508502e-02, -2.795044e-01, 1.504173e-01, 1.237434e-01,
     -2.422039e-01, -1.098984e-01, 1.994628e-01, -2.525889e-01, ]).reshape(11, )


# fmt: on


def forward(
        _arg0=MemRef('_arg0', 11, 11, input=True),
        _arg1=MemRef('_arg1', 1, output=True),
        _0=GlobalMemRef('__constant_11xf32', __constant_11xf32),
        _1=GlobalMemRef('__constant_11x11xf32', __constant_11x11xf32),
        _2=MemRef('_2', 11, 11, )
):
    def body(_arg2, _arg3, debug_print_file=None):
        _6 = _0[_arg3,]
        _2[_arg2, _arg3,] = _6

    ParFor(body, ranges=(range(0, 11, 1), range(0, 11, 1)))

    _3 = MemRef('_3', 11, 11, )

    def body(_arg2, _arg3, debug_print_file=None):
        _6 = _1[_arg3, _arg2,]
        _3[_arg2, _arg3,] = _6

    ParFor(body, ranges=(range(0, 11, 1), range(0, 11, 1)))

    _4 = MemRef('_4', 11, 11, )
    Copy(_4, _2)

    def body(_arg2, _arg3, debug_print_file=None):
        for _arg4 in range(0, 11, 1):
            _6 = _arg0[_arg2, _arg4,]
            _7 = _3[_arg4, _arg3,]
            _8 = _4[_arg2, _arg3,]
            _9 = _6 * _7
            _10 = _8 + _9
            _4[_arg2, _arg3,] = _10

    ParFor(body, ranges=(range(0, 11, 1), range(0, 11, 1)))

    _5 = MemRef('_5', 1, )
    _5[0,] = 0.000000
    Copy(_arg1, _5)
    for _arg2 in range(0, 11, 1):
        for _arg3 in range(0, 11, 1):
            _6 = _4[_arg2, _arg3,]
            _7 = _arg1[0,]
            _8 = _6 + _7
            _arg1[0,] = _8


if __name__ == "__main__":
    Forward(forward)
